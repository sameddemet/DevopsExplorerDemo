"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5249],{2811:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>u,frontMatter:()=>t,metadata:()=>l,toc:()=>c});var s=i(5893),a=i(1151);const t={sidebar_position:2},r="Installation et Configuration d\u2019Ansible",l={id:"Ansible/Installation et Configuration d\u2019Ansible",title:"Installation et Configuration d\u2019Ansible",description:"Utilisation d'Ansible",source:"@site/docs/Ansible/Installation et Configuration d\u2019Ansible.md",sourceDirName:"Ansible",slug:"/Ansible/Installation et Configuration d\u2019Ansible",permalink:"/docs/Ansible/Installation et Configuration d\u2019Ansible",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction \xe0 Ansible",permalink:"/docs/Ansible/Introduction \xe0 Ansible"},next:{title:"Playbooks",permalink:"/docs/Ansible/Playbooks"}},o={},c=[{value:"Utilisation d&#39;Ansible",id:"utilisation-dansible",level:2},{value:"1. Installation d&#39;Ansible",id:"1-installation-dansible",level:3},{value:"2. Cr\xe9ation d&#39;un Conteneur VM",id:"2-cr\xe9ation-dun-conteneur-vm",level:3},{value:"3. G\xe9n\xe9ration d&#39;une Cl\xe9 SSH",id:"3-g\xe9n\xe9ration-dune-cl\xe9-ssh",level:3},{value:"4. Cr\xe9ation du Fichier d&#39;Inventaire",id:"4-cr\xe9ation-du-fichier-dinventaire",level:3},{value:"5. Configuration du Fichier ansible.cfg",id:"5-configuration-du-fichier-ansiblecfg",level:3},{value:"6. Test Ansible",id:"6-test-ansible",level:3},{value:"7. Organisation avec des Playbooks",id:"7-organisation-avec-des-playbooks",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"installation-et-configuration-dansible",children:"Installation et Configuration d\u2019Ansible"}),"\n",(0,s.jsx)(n.h2,{id:"utilisation-dansible",children:"Utilisation d'Ansible"}),"\n",(0,s.jsx)(n.p,{children:"Pour utiliser Ansible, suivez ces \xe9tapes de base :"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Installez Ansible."}),"\n",(0,s.jsx)(n.li,{children:"Cr\xe9ez votre fichier d'inventaire."}),"\n",(0,s.jsx)(n.li,{children:"R\xe9digez vos Playbooks."}),"\n",(0,s.jsx)(n.li,{children:"Utilisez la commande Ansible pour ex\xe9cuter les t\xe2ches."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"1-installation-dansible",children:"1. Installation d'Ansible"}),"\n",(0,s.jsx)(n.p,{children:"Vous pouvez installer Ansible sur votre syst\xe8me ou sur le conteneur avec les commandes suivantes :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt update\r\nsudo apt install ansible\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-cr\xe9ation-dun-conteneur-vm",children:"2. Cr\xe9ation d'un Conteneur VM"}),"\n",(0,s.jsx)(n.p,{children:"Avant de commencer, nous cr\xe9ons un conteneur sur lequel nous allons travailler. Vous pouvez travailler directement dans une machine virtuelle ou dans un conteneur."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"lxc launch ubuntu:22.04 ansible-test  # Cr\xe9ation d'un conteneur \n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-g\xe9n\xe9ration-dune-cl\xe9-ssh",children:"3. G\xe9n\xe9ration d'une Cl\xe9 SSH"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ssh-keygen -t rsa -b 4096  # G\xe9n\xe9ration d'une cl\xe9 SSH\n"})}),"\n",(0,s.jsx)(n.p,{children:"Envoi de la cl\xe9 g\xe9n\xe9r\xe9e au conteneur:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"lxc file push .ssh/id_rsa.pub ansible-test/root/.ssh/authorized_keys\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-cr\xe9ation-du-fichier-dinventaire",children:"4. Cr\xe9ation du Fichier d'Inventaire"}),"\n",(0,s.jsx)(n.p,{children:"Manipulation pour \xe9viter de perturber le serveur VM:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'mkdir -p ansibles/etc \r\ncd ansibles/etc\r\nvim hosts  # Ajout de la ligne "ansible-test ansible_host=10.239.37.166(ip de conteneur)"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Lorsque nous ex\xe9cutons la commande suivante;"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ansible -i etc/hosts -u root -m ping ansible-test\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Le r\xe9sultat"})," devrait \xeatre similaire \xe0 ;"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'ansible-test | SUCCESS => {\r\n    "ansible_facts": {\r\n        "discovered_interpreter_python": "/usr/bin/python3"\r\n    },\r\n    "changed": false,\r\n    "ping": "pong"\r\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"5-configuration-du-fichier-ansiblecfg",children:"5. Configuration du Fichier ansible.cfg"}),"\n",(0,s.jsxs)(n.p,{children:["Cr\xe9ez le fichier ",(0,s.jsx)(n.strong,{children:"ansible.cfg"})," dans le r\xe9pertoire Ansible avec le contenu suivant :"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[defaults]\r\ninventory = ~/ansible/etc/hosts\r\nremote_user = root\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-test-ansible",children:"6. Test Ansible"}),"\n",(0,s.jsx)(n.p,{children:"V\xe9rification de la connexion avec Ansible :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ansible -m ping ansible-test\n"})}),"\n",(0,s.jsx)(n.p,{children:"Ex\xe9cution d'une commande avec Ansible :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'ansible -m command -a "ip a" ansible-test\n'})}),"\n",(0,s.jsx)(n.p,{children:"Affichage des informations syst\xe8me :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ansible -m setup ansible-test | less  \n"})}),"\n",(0,s.jsx)(n.h3,{id:"7-organisation-avec-des-playbooks",children:"7. Organisation avec des Playbooks"}),"\n",(0,s.jsx)(n.p,{children:"Ces \xe9tapes vous permettront de configurer Ansible et d'interagir avec vos serveurs de mani\xe8re automatis\xe9e."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir playbooks  # Cr\xe9ation du r\xe9pertoire pour les playbooks\n"})}),"\n",(0,s.jsx)(n.p,{children:'\xc0 ce stade, l\'\xe9tat du r\xe9pertoire "ansible" est le suivant.'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Output",src:i(3973).Z+"",width:"206",height:"106"})})]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3973:(e,n,i)=>{i.d(n,{Z:()=>s});const s="data:image/png;base64,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"},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>r});var s=i(7294);const a={},t=s.createContext(a);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);