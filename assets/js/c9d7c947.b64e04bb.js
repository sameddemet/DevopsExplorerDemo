"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6431],{7804:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var i=s(5893),l=s(1151);const r={sidebar_position:9},t="Ansible Templates",a={id:"Ansible/Ansible Templates",title:"Ansible Templates",description:"Les templates se d\xe9ploient exactement comme des fichier et utilisent le r\xe9pertoire templates au lieu du r\xe9pertoire files, en plus de copier le fichier ils interpr\xe8tent les fichier en utilisant le moteur de template jinja2 : on peut alors y inclure des variables voire boucler dans des listes / dictionnaires.",source:"@site/docs/Ansible/Ansible Templates.md",sourceDirName:"Ansible",slug:"/Ansible/Ansible Templates",permalink:"/docs/Ansible/Ansible Templates",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Variables et Mariadb Challenge",permalink:"/docs/Ansible/Variables et Mariadb Challenge"},next:{title:"Ansible-Galaxy",permalink:"/docs/Ansible/Ansible-galaxy"}},o={},c=[];function d(e){const n={code:"code",h1:"h1",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"ansible-templates",children:"Ansible Templates"}),"\n",(0,i.jsx)(n.p,{children:"Les templates se d\xe9ploient exactement comme des fichier et utilisent le r\xe9pertoire templates au lieu du r\xe9pertoire files, en plus de copier le fichier ils interpr\xe8tent les fichier en utilisant le moteur de template jinja2 : on peut alors y inclure des variables voire boucler dans des listes / dictionnaires."}),"\n",(0,i.jsx)(n.h1,{id:"challenge-ansible-templates",children:"Challenge Ansible Templates"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Challenge :"}),"\r\nD\xe9ployer dans l'un de vos containers un fichier ",(0,i.jsx)(n.code,{children:"readme.txt"})," dynamique qui contient les informations suivantes :"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"L'adresse IPv4 du container"}),"\n",(0,i.jsx)(n.li,{children:"Le nom de la distribution"}),"\n",(0,i.jsx)(n.li,{children:"L'architecture"}),"\n",(0,i.jsx)(n.li,{children:"La capacit\xe9 en m\xe9moire vive du container"}),"\n",(0,i.jsx)(n.li,{children:"La version de Python"}),"\n",(0,i.jsx)(n.li,{children:"La version d'Ansible"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Solution :"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Cr\xe9ation du Template :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Nous avons cr\xe9\xe9 un r\xe9pertoire ",(0,i.jsx)(n.code,{children:"templates"})," dans le r\xf4le MySQL en ex\xe9cutant la commande suivante :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir ../roles/mysql/templates\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'En utilisant le command suivant, ona a trouv\xe9 les variables sur "mysql"'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ansible -m setup mysql -u root \n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Cr\xe9ation du fichier ",(0,i.jsx)(n.code,{children:"README.txt.j2"})," dans ce r\xe9pertoire :"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jinja2",children:"Your Adresse IP: {{ ansible_default_ipv4.address }}\r\nYour Distribution: {{ ansible_distribution }}\r\nYour Architecture: {{ ansible_architecture }}\r\nYour RAM: {{ ansible_memory_mb.real.total }} MB\r\nYour Python: {{ ansible_python_version }}\r\nYour Ansible: {{ ansible_version.full }}\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Utilisation du Template dans la T\xe2che Ansible :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ajout de la t\xe2che suivante dans le fichier ",(0,i.jsx)(n.code,{children:"ansible/playbooks/roles/mysql/tasks/main.yml"})," pour d\xe9ployer le template :","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"- name: D\xe9ployer le template\r\n  ansible.builtin.template:\r\n    src: README.txt.j2\r\n    dest: /root/README.txt\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Ex\xe9cution du Playbook :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ex\xe9cution du playbook avec la commande suivante :","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ansible-playbook playbooks/mysql.yml\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"V\xe9rification dans le Container :"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Acc\xe9der au container et v\xe9rifier que le fichier ",(0,i.jsx)(n.code,{children:"root/README.txt"})," a \xe9t\xe9 cr\xe9\xe9 :","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"Your Adresse IP: 10.239.37.201\r\nYour Distribution: Ubuntu\r\nYour Architecture: x86_64\r\nYour RAM: 3859 MB\r\nYour Python: 3.10.12\r\nYour Ansible: 2.15.0\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Ainsi, avec l'utilisation de templates, le fichier ",(0,i.jsx)(n.code,{children:"readme.txt"})," a \xe9t\xe9 d\xe9ploy\xe9 de mani\xe8re dynamique dans le container, prenant en compte les variables sp\xe9cifi\xe9es lors de l'ex\xe9cution du playbook."]})]})}function u(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>t});var i=s(7294);const l={},r=i.createContext(l);function t(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);