"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5030],{4e3:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>l,toc:()=>a});var t=i(5893),r=i(1151);const s={sidebar_position:4},o="Int\xe9gration d'Ansible avec GitHub Actions",l={id:"Ansible/Int\xe9gration d'Ansible avec GitHub Actions",title:"Int\xe9gration d'Ansible avec GitHub Actions",description:"Int\xe9gration Continue avec GitHub Actions",source:"@site/docs/Ansible/Int\xe9gration d'Ansible avec GitHub Actions.md",sourceDirName:"Ansible",slug:"/Ansible/Int\xe9gration d'Ansible avec GitHub Actions",permalink:"/docs/Ansible/Int\xe9gration d'Ansible avec GitHub Actions",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Playbooks",permalink:"/docs/Ansible/Playbooks"},next:{title:"Cr\xe9ation d'un R\xf4le Ansible",permalink:"/docs/Ansible/Cr\xe9ation d'un R\xf4le Ansible"}},c={},a=[{value:"Int\xe9gration Continue avec GitHub Actions",id:"int\xe9gration-continue-avec-github-actions",level:2},{value:"1. Configuration d&#39;un Runner sur le R\xe9pertoire Git",id:"1-configuration-dun-runner-sur-le-r\xe9pertoire-git",level:3},{value:"2. Exemple de Workflow GitHub",id:"2-exemple-de-workflow-github",level:3}];function u(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"int\xe9gration-dansible-avec-github-actions",children:"Int\xe9gration d'Ansible avec GitHub Actions"}),"\n",(0,t.jsx)(n.h2,{id:"int\xe9gration-continue-avec-github-actions",children:"Int\xe9gration Continue avec GitHub Actions"}),"\n",(0,t.jsx)(n.p,{children:"Pour int\xe9grer Ansible \xe0 votre flux de travail GitHub, suivez ces \xe9tapes :"}),"\n",(0,t.jsx)(n.h3,{id:"1-configuration-dun-runner-sur-le-r\xe9pertoire-git",children:"1. Configuration d'un Runner sur le R\xe9pertoire Git"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone ....  # Clonez votre d\xe9p\xf4t Git\n"})}),"\n",(0,t.jsx)(n.p,{children:"Dans le r\xe9pertoire Git, copiez les fichiers que nous avons cr\xe9\xe9s pr\xe9c\xe9demment :"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"Ansible.cfg"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"etc/hosts"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"playbooks/recette.yml"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Cr\xe9ez \xe9galement un runner dans le r\xe9pertoire du d\xe9p\xf4t."}),"\n",(0,t.jsx)(n.h3,{id:"2-exemple-de-workflow-github",children:"2. Exemple de Workflow GitHub"}),"\n",(0,t.jsxs)(n.p,{children:["Cr\xe9ez un fichier ",(0,t.jsx)(n.code,{children:".github/workflows/tp.yml"})," pour d\xe9finir le flux de travail GitHub. Voici un exemple :"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yml",children:"name: D\xe9ploiement du Projet Ansible\r\n\r\non:\r\n  push:\r\n    branches:\r\n      - master\r\n  workflow_dispatch:\r\n\r\njobs:\r\n  build:\r\n    runs-on: self-hosted\r\n    steps:\r\n      - name: Checkout Repository\r\n        uses: actions/checkout@v2\r\n\r\n      - name: Copier les fichiers Ansible au bon emplacement\r\n        run: |\r\n          mkdir -p /home/student/ansible\r\n          rsync -av --delete -P ansible/* /home/student/ansible\r\n\r\n      - name: D\xe9ployer le Projet Ansible\r\n        working-directory: /home/student/challenge-s08-e01-bis-sameddemet/ansible\r\n        run: |\r\n          ansible-playbook playbooks/recette.yml\n"})}),"\n",(0,t.jsxs)(n.p,{children:["La ligne ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.code,{children:"rsync -av --delete -P ansible/* /home/student/ansible"})})," synchronise le r\xe9pertoire ansible local avec celui de GitHub. M\xeame si le d\xe9ploiement est effectu\xe9 manuellement depuis GitHub, les r\xe9pertoires restent synchronis\xe9s, ce qui est pratique."]}),"\n",(0,t.jsx)(n.p,{children:"Ces \xe9tapes garantissent l'int\xe9gration continue d'Ansible avec votre d\xe9p\xf4t GitHub \xe0 chaque modification sur la branche master ou lors d'un d\xe9clenchement manuel."})]})}function d(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>l,a:()=>o});var t=i(7294);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);